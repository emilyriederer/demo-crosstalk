"0","# create SharedData ----"
"0","trips_ct <- "
"0","  trips %>%"
"0","  select(station_name, station_id, year_2019, year_2020, pct_change, prop_wend_2019) %>%"
"0","  mutate_at(vars(pct_change, prop_wend_2019), round, 2) %>%"
"0","  SharedData$new(key = ~station_id, group = ""loc"")"
"0","stations_ct <- SharedData$new(stations, key = ~station_id, group = ""loc"")"
"0",""
"0","# create individual widgets ----"
"0",""
"0","# map"
"0","lf <- leaflet(stations_ct) %>% addTiles() %>% addMarkers()"
"0",""
"0",""
"0","# table"
"0","dt <- datatable(trips_ct,"
"0","                fillContainer = TRUE,"
"0","                rownames = FALSE,"
"0","                colnames = c(""Station"", ""ID"","
"0","                             ""2019 Rides"", ""2020 Rides"", "
"0","                             ""% Change"", ""% Weekend 2019""))"
"0",""
"0","# plot"
"0","gg <- ggplot(trips_ct) +"
"0","    aes("
"0","      x = prop_wend_2019, "
"0","      y = pct_change,"
"0","      col = pct_change,"
"0","      name = station_name) +"
"0","    geom_point() +"
"0","    guides(col = FALSE) +"
"0","  labs("
"0","    x = ""% Apr 2019 Trips on Weekend"","
"0","    y = ""% Change Apr 2020 vs 2019"""
"0","  ) +"
"0","  scale_x_continuous(labels = scales::percent) +"
"0","  scale_y_continuous(labels = scales::percent)"
"0","gg_ly <- "
"0","  ggplotly(gg, tooltip = ""name"") %>%"
"0","  highlight(on = ""plotly_selected"","
"0","            off = ""plotly_doubleclick"")"
